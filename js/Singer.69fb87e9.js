(window.webpackJsonp=window.webpackJsonp||[]).push([["Singer"],{"7f43":function(t,n,e){"use strict";e.r(n);var i=e("b85c"),a=(e("b0c0"),e("4de4"),e("d3b7"),e("e9c4"),e("ae58")),r=e("229e"),s=e("aaef"),c={name:"Singer",data:function(){return{rawSingersData:[],singersData:[]}},created:function(){this.initRawSingersData()},computed:{indexList:function(){var t,n=[],e=Object(i.a)(this.singersData);try{for(e.s();!(t=e.n()).done;){var a=t.value;n.push(a.index)}}catch(t){e.e(t)}finally{e.f()}return n},loading:function(){return!this.singersData.length}},methods:{initRawSingersData:function(){var t=this;Object(a.b)().then((function(n){if(200===n.code){var e,a=[],r=Object(i.a)(n.artists);try{for(r.s();!(e=r.n()).done;){var s=e.value,c={id:s.id,name:s.name,url:s.picUrl};a.push(c)}}catch(t){r.e(t)}finally{r.f()}t.rawSingersData=a}})).then((function(){t.initSingersData()}))},initBaseData:function(){for(var t=[],n=65;n<91;n++){var e={index:String.fromCharCode(n),singers:[]};t.push(e)}return t},initSingersData:function(){var t,n=this.initBaseData(),a=e("d958"),r=Object(i.a)(this.rawSingersData);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(s.name[0].toUpperCase()===s.name[0].toLowerCase())var c=a(s.name,{style:a.STYLE_FIRST_LETTER,segment:!0,heteronym:!0})[0][0];else c=s.name[0].toUpperCase();var o=c.toUpperCase().charCodeAt(0)-65;if(n[o].index!==c.toUpperCase())throw Error("singers index error");n[o].singers.push(s)}}catch(t){r.e(t)}finally{r.f()}var u=n.filter((function(t){return t.singers.length>0}));this.singersData=u},handleSingerClick:function(t){var n={id:t.id,name:t.name,url:t.url};localStorage.setItem(s.d,JSON.stringify(n)),this.$router.push({path:"/singer/".concat(t.id)})},initScroll:function(){this.scroll=new r.a(".singerScroll",{})}},updated:function(){}},o=(e("bf73"),e("2877")),u=Object(o.a)(c,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"singer"},[t.loading?e("van-loading",{staticClass:"loading",attrs:{type:"spinner",color:"#ffcd32"}}):t._e(),e("div",{staticClass:"singerScroll"},[e("div",{staticClass:"wrap"},[e("van-index-bar",{attrs:{"index-list":t.indexList}},t._l(t.singersData,(function(n){return e("div",{key:n.id},[e("van-index-anchor",{attrs:{index:n.index}},[t._v(t._s(n.index))]),t._l(n.singers,(function(n){return e("div",{key:n.id,staticClass:"singer-list",on:{click:function(e){return t.handleSingerClick(n)}}},[e("div",{staticClass:"pic"},[e("img",{attrs:{src:n.url,alt:""}})]),e("div",{staticClass:"name"},[t._v(t._s(n.name))])])}))],2)})),0)],1)]),e("router-view",{key:(new Date).getTime()})],1)}),[],!1,null,"9c25f786",null);n.default=u.exports},ae58:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return r})),e.d(n,"a",(function(){return s}));var i=e("58ff");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Object(i.a)("/top/artists?offset="+t+"&limit="+n)}function r(t){return Object(i.a)("/artist/top/song?id="+t)}function s(t){return Object(i.a)("/artist/detail?id="+t)}},bf73:function(t,n,e){"use strict";e("ff79")},ff79:function(t,n,e){}}]);