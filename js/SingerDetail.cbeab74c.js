(window.webpackJsonp=window.webpackJsonp||[]).push([["SingerDetail"],{5038:function(t,e,s){"use strict";s("f3d2")},"9c37":function(t,e,s){"use strict";s.r(e);var n=s("b85c"),i=(s("4de4"),s("d3b7"),s("b0c0"),s("f382")),o=s("ae58"),r=s("aaef"),a={name:"SingerDetail",data:function(){return{songsData:[],targetInfo:{}}},components:{MusicList:i.a},created:function(){this.initSongsData(),this.initTargetInfo()},mounted:function(){},methods:{initSongsData:function(){var t=this,e=this.$route.params.id;Object(o.c)(e).then((function(e){if(200===e.code){var s,i=[],o=Object(n.a)(e.songs);try{for(o.s();!(s=o.n()).done;){var r=s.value,a={artists:r.ar,mid:r.id,name:r.name,fee:r.fee,album:r.al};i.push(a)}}catch(t){o.e(t)}finally{o.f()}var c=i.filter((function(t){return 8===t.fee}));t.songsData=c,c.length?t.songsData=c:t.songsData.push({error:!0,msg:"没有可播放的歌曲"})}}))},initTargetInfo:function(){var t=JSON.parse(localStorage.getItem(r.d));this.targetInfo=t}}},c=(s("5038"),s("2877")),l=Object(c.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"singer-detail"},[e("MusicList",{staticClass:"animate__animated animate__fadeInRight",attrs:{title:this.targetInfo.name,pic:this.targetInfo.url,songsData:this.songsData}})],1)}),[],!1,null,"633a377c",null);e.default=l.exports},ae58:function(t,e,s){"use strict";s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return o})),s.d(e,"a",(function(){return r}));var n=s("58ff");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return Object(n.a)("/top/artists?offset="+t+"&limit="+e)}function o(t){return Object(n.a)("/artist/top/song?id="+t)}function r(t){return Object(n.a)("/artist/detail?id="+t)}},e018:function(t,e,s){"use strict";s("f9a7")},f382:function(t,e,s){"use strict";var n=s("5530"),i=(s("4de4"),s("d3b7"),s("229e")),o="undefined"!=typeof window,r=o&&navigator.userAgent.toLowerCase();r&&/wechatdevtools/.test(r),r&&r.indexOf("android"),function(){if("string"==typeof r){var t=/os (\d\d?_\d(_\d)?)/.exec(r);if(!t)return!1;var e=t[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===e[0]&&e[1]>=4)}}();if(o){try{var a={};Object.defineProperty(a,"passive",{get:function(){!0}}),window.addEventListener("test-passive",(function(){}),a)}catch(t){}}var c=o&&document.createElement("div").style,l=function(){if(!o)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var s=e[t];if(void 0!==c[s.value])return s.key}return!1}();function u(t){return!1===l?t:"standard"===l?"transitionEnd"===t?"transitionend":t:l+t.charAt(0).toUpperCase()+t.substr(1)}l&&"standard"!==l&&l.toLowerCase();u("transform"),u("transition");function f(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}o&&u("perspective"),u("transitionTimingFunction"),u("transitionDuration"),u("transitionDelay"),u("transformOrigin"),u("transitionEnd"),u("transitionProperty");var h=function(){function t(t){this.scroll=t,this.stopObserver=!1,this.init()}return t.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},t.prototype.handleMutationObserver=function(){var t=this;if("undefined"!=typeof MutationObserver){this.observer=new MutationObserver((function(e){t.mutationObserverHandler(e,0)})),this.startObserve(this.observer)}else this.checkDOMUpdate()},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.stopObserve(),t.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,(function(){t.stopObserver&&t.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,(function(){t.stopObserve()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,(function(){t.destroy()}))},t.prototype.mutationObserverHandler=function(t,e){var s=this;if(!this.shouldNotRefresh()){for(var n=!1,i=!1,o=0;o<t.length;o++){var r=t[o];if("attributes"!==r.type){n=!0;break}if(r.target!==this.scroll.scroller.content){i=!0;break}}n?this.scroll.refresh():i&&(clearTimeout(e),e=window.setTimeout((function(){s.shouldNotRefresh()||s.scroll.refresh()}),60))}},t.prototype.startObserve=function(t){t.observe(this.scroll.scroller.content,{attributes:!0,childList:!0,subtree:!0})},t.prototype.shouldNotRefresh=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,s=t.scrollBehaviorY,n=e.currentPos>e.minScrollPos||e.currentPos<e.maxScrollPos||s.currentPos>s.minScrollPos||s.currentPos<s.maxScrollPos;return t.animater.pending||n},t.prototype.checkDOMUpdate=function(){var t=this,e=this.scroll.scroller.content,s=f(e),n=s.width,i=s.height,o=function(){setTimeout((function(){!function(){if(!t.stopObserver){var r=(s=f(e)).width,a=s.height;n===r&&i===a||t.scroll.refresh(),n=r,i=a,o()}}()}),1e3)};o()},t.prototype.registerHooks=function(t,e,s){t.on(e,s,this),this.hooksFn.push([t,e,s])},t.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},t.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach((function(t){var e=t[0],s=t[1],n=t[2];e.off(s,n)})),this.hooksFn.length=0},t.pluginName="observeDOM",t}(),d=s("2f62"),p=s("ae58");i.a.use(h);var v={name:"MusicList",data:function(){return{imageTop:0,scrollY:0,maxPullUp:0}},props:{title:{type:String,default:""},pic:{type:String,default:""},songsData:{type:Array,default:function(){return[]}}},mounted:function(){var t=this;this.imageTop=this.$refs.bgImg.clientHeight,this.maxPullUp=this.imageTop-40,this.$nextTick((function(){t.scroll1=new i.a(".song-list",{probeType:3,observeDOM:!0,mouseWheel:!0,click:!0,tap:"tap"}),t.scroll1.on("scroll",(function(e){e.x;var s=e.y;t.scrollY=-s}))}))},computed:{loading:function(){return this.songsData.length},scrollStyle:function(){return{top:"".concat(this.imageTop,"px")}},coverStyle:function(){var t="20vh",e="40%",s=0,n=1;this.scrollY<0&&(n=1+Math.abs(this.scrollY/this.imageTop));var i=0;return this.scrollY>0&&(i=this.scrollY/50+1,this.$refs.filter.style.backdropFilter="blur(".concat(i,"px)")),this.scrollY>this.maxPullUp&&(t="40px",e="0%",s=10),{backgroundImage:"url(".concat(this.pic,")"),height:t,paddingTop:e,zIndex:s,transform:"scale(".concat(n,")")}}},methods:Object(n.a)(Object(n.a)({},Object(d.b)(["selectPlay","randomPlay"])),{},{goBack:function(){var t=this;document.querySelector(".music-list").classList.add("animate__fadeOutRight"),setTimeout((function(){t.$router.back()}),500)},selectSong:function(t,e){this.selectPlay({list:t,index:e})},playRandomAll:function(t){this.randomPlay({list:t})}}),watch:{pic:{handler:function(){var t=this,e=this.$route.params.id;this.pic||Object(p.a)(e).then((function(e){200===e.code&&(t.pic=e.data.artist.cover)}))},immediate:!0}}},g=(s("e018"),s("2877")),m=Object(g.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"music-list animate__animated"},[s("van-icon",{staticClass:"back",attrs:{name:"arrow-left"},nativeOn:{click:function(e){return t.goBack.apply(null,arguments)}}}),s("div",{staticClass:"title"},[t._v(t._s(t.title))]),s("div",{ref:"bgImg",staticClass:"cover",style:t.coverStyle},[s("div",{ref:"filter",staticClass:"filter"}),s("div",{staticClass:"playRandomAll",on:{click:function(e){return t.playRandomAll(t.songsData)}}},[s("van-icon",{staticClass:"play",attrs:{name:"play-circle-o"}}),s("span",[t._v("随机播放全部")])],1)]),t.loading?t._e():s("van-loading",{staticClass:"loading",attrs:{type:"spinner",color:"#ffcd32"}}),t.songsData.length>=1&&t.songsData[0].error?[s("div",{staticClass:"error"},[s("van-icon",{attrs:{name:"close"}}),s("span",[t._v(t._s(t.songsData[0].msg))])],1)]:[s("div",{ref:"songList",staticClass:"song-list",style:t.scrollStyle},[s("div",{staticClass:"wrap"},t._l(t.songsData,(function(e,n){return s("div",{key:e.mid,staticClass:"song-item",on:{click:function(e){return t.selectSong(t.songsData,n)}}},[s("p",{staticClass:"song-name"},[t._v(t._s(e.name))]),s("p",{staticClass:"song-album"},[t._v(t._s(e.album.name))])])})),0)])]],2)}),[],!1,null,"50aee791",null);e.a=m.exports},f3d2:function(t,e,s){},f9a7:function(t,e,s){}}]);